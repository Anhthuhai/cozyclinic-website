<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test EmailJS - Cozy Clinic</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #2563eb; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #1d4ed8; }
        .status { padding: 10px; margin: 10px 0; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
</head>
<body>
    <h1>üß™ Test EmailJS - Cozy Clinic</h1>
    <p><strong>H∆∞·ªõng d·∫´n:</strong> ƒêi·ªÅn th√¥ng tin v√† g·ª≠i ƒë·ªÉ test xem email c√≥ ƒë·∫øn cozyclinic2026@gmail.com kh√¥ng.</p>
    
    <form id="testForm">
        <div class="form-group">
            <label>Public Key EmailJS:</label>
            <input type="text" id="publicKey" placeholder="Nh·∫≠p Public Key t·ª´ EmailJS" required>
        </div>
        
        <div class="form-group">
            <label>Service ID:</label>
            <input type="text" id="serviceId" placeholder="Nh·∫≠p Service ID t·ª´ EmailJS" required>
        </div>
        
        <div class="form-group">
            <label>Template ID:</label>
            <input type="text" id="templateId" placeholder="Nh·∫≠p Template ID t·ª´ EmailJS" required>
        </div>
        
        <hr style="margin: 30px 0;">
        
        <h3>Th√¥ng tin test ƒë·∫∑t l·ªãch:</h3>
        
        <div class="form-group">
            <label>H·ªç t√™n:</label>
            <input type="text" id="testName" value="Nguy·ªÖn VƒÉn Test" required>
        </div>
        
        <div class="form-group">
            <label>S·ªë ƒëi·ªán tho·∫°i:</label>
            <input type="tel" id="testPhone" value="0123456789" required>
        </div>
        
        <div class="form-group">
            <label>Email:</label>
            <input type="email" id="testEmail" value="test@example.com">
        </div>
        
        <div class="form-group">
            <label>D·ªãch v·ª•:</label>
            <select id="testService" required>
                <option value="internal-medicine">Kh√°m n·ªôi t·ªïng qu√°t</option>
                <option value="cardiology">B·ªánh l√Ω tim m·∫°ch</option>
            </select>
        </div>
        
        <div class="form-group">
            <label>Ng√†y kh√°m:</label>
            <input type="date" id="testDate" required>
        </div>
        
        <div class="form-group">
            <label>Gi·ªù kh√°m:</label>
            <select id="testTime" required>
                <option value="08:00">08:00</option>
                <option value="14:00">14:00</option>
            </select>
        </div>
        
        <div class="form-group">
            <label>Ghi ch√∫:</label>
            <textarea id="testNotes">ƒê√¢y l√† test email t·ª´ website Cozy Clinic</textarea>
        </div>
        
        <button type="submit">üöÄ Test G·ª≠i Email</button>
    </form>
    
    <div id="status"></div>
    
    <script>
        // Set default date to tomorrow
        document.getElementById('testDate').valueAsDate = new Date(Date.now() + 86400000);
        
        document.getElementById('testForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const statusDiv = document.getElementById('status');
            
            // Get EmailJS config
            const publicKey = document.getElementById('publicKey').value;
            const serviceId = document.getElementById('serviceId').value;
            const templateId = document.getElementById('templateId').value;
            
            if (!publicKey || !serviceId || !templateId) {
                statusDiv.innerHTML = '<div class="status error">‚ùå Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin EmailJS!</div>';
                return;
            }
            
            // Initialize EmailJS
            emailjs.init({
                publicKey: publicKey,
                blockHeadless: true,
                limitRate: { id: 'app', throttle: 10000 }
            });
            
            // Get form data
            const serviceNames = {
                'internal-medicine': 'Kh√°m n·ªôi t·ªïng qu√°t',
                'cardiology': 'B·ªánh l√Ω tim m·∫°ch'
            };
            
            const formData = {
                patient_name: document.getElementById('testName').value,
                patient_phone: document.getElementById('testPhone').value,
                patient_email: document.getElementById('testEmail').value || 'Kh√¥ng cung c·∫•p',
                service_name: serviceNames[document.getElementById('testService').value],
                appointment_date: new Date(document.getElementById('testDate').value).toLocaleDateString('vi-VN'),
                appointment_time: document.getElementById('testTime').value,
                notes: document.getElementById('testNotes').value || 'Kh√¥ng c√≥ ghi ch√∫',
                booking_datetime: new Date().toLocaleString('vi-VN'),
                clinic_email: 'cozyclinic2026@gmail.com'
            };
            
            statusDiv.innerHTML = '<div class="status">‚è≥ ƒêang g·ª≠i email test...</div>';
            
            // Send test email
            emailjs.send(serviceId, templateId, formData)
                .then(function(response) {
                    statusDiv.innerHTML = '<div class="status success">‚úÖ G·ª≠i email test th√†nh c√¥ng! Ki·ªÉm tra h·ªôp th∆∞ cozyclinic2026@gmail.com</div>';
                    console.log('Success:', response);
                })
                .catch(function(error) {
                    statusDiv.innerHTML = '<div class="status error">‚ùå L·ªói g·ª≠i email: ' + JSON.stringify(error) + '</div>';
                    console.error('Error:', error);
                });
        });
    </script>
</body>
</html>
